(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{8970:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return we}});var n=r(5666),a=r.n(n),i=r(5893),o=r(7294),c=r(9669),l=r.n(c);function s(e){return"https://raw.githubusercontent.com/ja1984/sogdb/master/images/".concat(e,".webp")}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){for(var r=t.map((function(e){return e.year})),n=void 0,a=0;void 0===n;){if((a+=1)>1e3)throw new Error("Couldn't find item after ".concat(a," iterations"));var i=Math.floor(Math.random()*e.length),o=e[i];r.includes(o.year)||(e.splice(i,1),n=u({},o))}return n}function m(e,t,r){var n=f(e).concat([t]).sort((function(e,t){return e.year-t.year})).findIndex((function(e){return e.id===t.id}));return r!==n?{correct:!1,delta:n-r}:{correct:!0,delta:0}}function h(e){var t=new Image;return t.src=s(e),t}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){b(e,t,r[t])}))}return e}async function g(e){var t=p(e,[]),r=p(e,[]);return{badlyPlaced:null,deck:e,imageCache:[h(t.image),h(r.image)],lives:3,next:t,nextButOne:r,played:[y({},p(e,[]),{played:{correct:!0}})]}}var v=r(5948),_=r(1e3);function x(e,t,r){requestAnimationFrame((function(){var n=document.getElementById("bottom");if(null===n)throw new Error("Can't find #bottom");var a=t.shift(),i=r.shift();void 0===a||void 0===i?e.drop():(n.scrollLeft=i,e.move({x:a,y:0}),x(e,t,r))}))}async function j(e,t){var r;if(null!==e.badlyPlaced&&null!==e.badlyPlaced.index&&!1!==e.badlyPlaced.rendered){var n=null===(r=t.tryGetLock)||void 0===r?void 0:r.call(t,e.played[e.badlyPlaced.index].id);if(n){var a=document.querySelector("[data-rbd-draggable-id='".concat(e.played[e.badlyPlaced.index].id,"']")),i=document.querySelector("[data-rbd-draggable-id='".concat(e.played[e.badlyPlaced.index+e.badlyPlaced.delta].id,"']")),o=document.getElementById("bottom");if(null===a||null===i||null===o)throw new Error("Can't find element");var c=o.scrollLeft+o.clientWidth/4,l=o.scrollLeft+o.clientWidth/4*3-a.clientWidth,s=0;(i.offsetLeft<c||i.offsetLeft>l)&&(s=i.offsetLeft<c?i.offsetLeft-c:i.offsetLeft-l,o.scrollLeft+s<0?s=-o.scrollLeft:o.scrollLeft+s>o.scrollWidth-o.clientWidth&&(s=o.scrollWidth-o.clientWidth-o.scrollLeft));for(var d=i.offsetLeft-a.offsetLeft-s,u=n.fluidLift({x:0,y:0}),f=[],p=[],m=30+5*Math.abs(e.badlyPlaced.delta),h=0;h<m;h++)f.push(_.easeOutCirc(h,0,d,m)),p.push(_.easeOutCirc(h,o.scrollLeft,o.scrollLeft+s,m));x(u,f,p)}}}var w=r(4184),P=r.n(w),O=r(7863),k=r(337),S=r.n(k);function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C,I,E={P575:"discovered",P7589:"date of assent",P577:"published",P1191:"first performed",P1619:"officially opened",P571:"created",P1249:"earliest record",P576:"ended",P8556:"became extinct",P6949:"announced",P1319:"earliest",P569:"born",P570:"died",P582:"ended",P580:"started",P7125:"latest one",P7124:"first one"};function L(e){return e.charAt(0).toUpperCase()+e.slice(1)}function A(e){var t=e.draggable,r=e.flippedId,n=e.index,a=e.item,o=e.setFlippedId,c=a.id===r,l=(0,O.useSpring)({opacity:c?1:0,transform:"perspective(600px) rotateY(".concat(c?180:0,"deg)"),config:{mass:5,tension:750,friction:100}}),d=new Date(0);d.setUTCSeconds(a.year);var u=d.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,i.jsx)(v._l,{draggableId:a.id,index:n,isDragDisabled:!t,children:function(e,t){return(0,i.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){N(e,t,r[t])}))}return e}({className:P()(S().itemCard,(C={},N(C,S().played,"played"in a),N(C,S().flipped,c),N(C,S().dragging,t.isDragging),C)),ref:e.innerRef},e.draggableProps,e.dragHandleProps,{onClick:function(){"played"in a&&o&&o(c?null:a.id)},children:[(0,i.jsxs)(O.animated.div,{className:S().front,style:{opacity:l.opacity.to((function(e){return 1-e})),transform:l.transform},children:[(0,i.jsx)("div",{className:S().top,children:(0,i.jsx)("div",{className:S().label,children:L(a.label)})}),(0,i.jsx)("div",{className:S().image,style:{backgroundImage:'url("'.concat(s(a.image),'")')}}),(0,i.jsx)(O.animated.div,{className:P()(S().bottom,(I={},N(I,S().correct,"played"in a&&a.played.correct),N(I,S().incorrect,"played"in a&&!a.played.correct),I)),children:(0,i.jsx)("span",{children:"played"in a?u:"???"})})]}),(0,i.jsxs)(O.animated.div,{className:S().back,style:{opacity:l.opacity,transform:l.transform.to((function(e){return"".concat(e," rotateX(180deg) rotateZ(180deg)")}))},children:[(0,i.jsx)("span",{className:S().label,children:L(a.label)}),(0,i.jsxs)("span",{className:S().date,children:[L(E[a.date_prop_id]),": ",u]}),(0,i.jsx)("span",{className:S().description,children:a.description}),(0,i.jsx)("a",{href:a.wikipedia_title,className:S().wikipedia,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"Store page"})]})]}))}})}var D=r(549),W=r.n(D);function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){B(e,t,r[t])}))}return e}function F(e){var t=e.next;return(0,i.jsx)("div",{className:W().container,children:(0,i.jsx)(v.bK,{droppableId:"next",direction:"horizontal",children:function(e){return(0,i.jsx)("div",{className:W().wrapper,children:(0,i.jsxs)("div",G({ref:e.innerRef},e.droppableProps,{className:W().list,children:[t&&(0,i.jsx)(A,{draggable:!0,index:0,item:t},t.id),e.placeholder]}))})}})})}var T=r(6495),H=r.n(T);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Z(e){var t=e.badlyPlacedIndex,r=e.isDragging,n=e.items,a=q(o.useState(null),2),c=a[0],l=a[1];return o.useEffect((function(){r&&null!==c&&l(null)}),[c,r]),(0,i.jsx)("div",{className:H().wrapper,children:(0,i.jsx)("div",{className:H().listContainer,children:(0,i.jsx)(v.bK,{droppableId:"played",direction:"horizontal",children:function(e){return(0,i.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}({ref:e.innerRef},e.droppableProps,{className:H().list,children:[(0,i.jsx)("div",{className:H().timelineContainer,children:(0,i.jsx)("div",{className:H().timeline})}),(0,i.jsx)("div",{className:H().items,children:n.map((function(e,r){return(0,i.jsx)(A,{draggable:null!==t,flippedId:c,index:r,item:e,setFlippedId:l},e.id)}))}),e.placeholder]}))}})})})}var J=r(7052),U=r.n(J),Y=r(2251),z=r.n(Y);function K(e){var t,r=e.have,n=(0,O.useSpring)({opacity:r?1:.4,config:{duration:300}}).opacity,a=(0,O.useSpring)({scale:r?1:.8,config:{mass:1,tension:200,friction:20,duration:300},delay:200}).scale;return(0,i.jsx)(O.animated.img,{className:z().heart,style:{opacity:n,scale:a},src:"".concat(null!==(t="/stadia-games-history-www")?t:"","/images/heart.svg")})}function R(e){var t=e.lives;return(0,i.jsxs)("div",{className:z().hearts,children:[(0,i.jsx)(K,{have:t>=1}),(0,i.jsx)(K,{have:t>=2}),(0,i.jsx)(K,{have:t>=3})]})}var X=r(6814),Q=r.n(X),V=r(4362),$=r.n(V);function ee(e){var t=e.onClick,r=e.text;return(0,i.jsx)("button",{onClick:t,className:$().button,children:r})}var te=r(8586),re=r.n(te);function ne(e){var t=e.score,r=e.title,n="#ffffff";return t>=20?n="#FFC940":t>=10?n="#A7B6C2":t>=1&&(n="#C99765"),(0,i.jsxs)("div",{className:re().score,style:{backgroundColor:n},children:[(0,i.jsx)("div",{className:re().title,children:r}),(0,i.jsx)("div",{className:re().value,children:t})]})}function ae(e){var t=e.highscore,r=e.resetGame,n=e.score,a=(0,O.useSpring)({opacity:1,from:{opacity:0},config:{duration:500}});return(0,i.jsxs)(O.animated.div,{style:a,className:Q().gameOver,children:[(0,i.jsxs)("div",{className:Q().scoresWrapper,children:[(0,i.jsx)("div",{className:Q().score,children:(0,i.jsx)(ne,{score:n,title:"Streak"})}),(0,i.jsx)("div",{className:Q().score,children:(0,i.jsx)(ne,{score:t,title:"Best streak"})})]}),(0,i.jsx)(ee,{onClick:r,text:"Play again!"})]})}function ie(e,t,r,n,a,i,o){try{var c=e[i](o),l=c.value}catch(s){return void r(s)}c.done?t(l):Promise.resolve(l).then(n,a)}function oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ie(i,n,a,o,c,"next",e)}function c(e){ie(i,n,a,o,c,"throw",e)}o(void 0)}))}}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ce(e,t,r[t])}))}return e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function de(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ue(e){var t=e.highscore,r=e.resetGame,n=e.state,c=e.setState,l=e.updateHighscore,s=se(o.useState(!1),2),d=s[0],u=s[1];function f(){return(f=oe(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),navigator.vibrate(20);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=oe(a().mark((function e(t){var r,i,o,l,s,d,f,b,y,g,v,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:var a;if(u(!1),r=(a=t).source,(i=a.destination)&&null!==n.next&&("next"!==r.droppableId||"next"!==i.droppableId)){e.next=4;break}return e.abrupt("return");case 4:var x;if(o=le({},n.next),"next"===r.droppableId&&"played"===i.droppableId)l=de(n.deck),s=de(n.played),d=n.nextButOne,f=p(l,s),b=[h(f.image)],x=m(s,o,i.index),y=x.correct,g=x.delta,s.splice(i.index,0,le({},n.next,{played:{correct:y}})),c(le({},n,{deck:l,imageCache:b,next:d,nextButOne:f,played:s,lives:y?n.lives:n.lives-1,badlyPlaced:y?null:{index:i.index,rendered:!1,delta:g}}));else if("played"===r.droppableId&&"played"===i.droppableId){var j;j=(v=de(n.played)).splice(r.index,1),_=j[0],v.splice(i.index,0,_),c(le({},n,{played:v,badlyPlaced:null}))}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.useLayoutEffect((function(){n.badlyPlaced&&null!==n.badlyPlaced.index&&!n.badlyPlaced.rendered&&c(le({},n,{badlyPlaced:le({},n.badlyPlaced,{rendered:!0})}))}),[c,n]);var y=o.useMemo((function(){return n.played.filter((function(e){return e.played.correct})).length-1}),[n.played]);return o.useLayoutEffect((function(){y>t&&l(y)}),[y,t,l]),(0,i.jsx)(v.Z5,{onDragEnd:function(e){return b.apply(this,arguments)},onDragStart:function(){return f.apply(this,arguments)},sensors:[j.bind(null,n)],children:(0,i.jsxs)("div",{className:U().wrapper,children:[(0,i.jsxs)("div",{className:U().top,children:[(0,i.jsx)(R,{lives:n.lives}),n.lives>0?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(F,{next:n.next})}):(0,i.jsx)(ae,{highscore:t,resetGame:r,score:y})]}),(0,i.jsx)("div",{id:"bottom",className:U().bottom,children:(0,i.jsx)(Z,{badlyPlacedIndex:null===n.badlyPlaced?null:n.badlyPlaced.index,isDragging:d,items:n.played})})]})})}var fe=r(1607),pe=r(3025),me=r.n(pe);function he(){return(0,i.jsxs)("div",{className:me().loading,children:[(0,i.jsx)("h1",{children:"Loading"}),(0,i.jsx)(fe.Z,{type:"Oval",color:"#006699",height:60,width:60})]})}var be=r(8930),ye=r(9674),ge=r.n(ye);function ve(e){var t=e.highscore,r=e.start;return(0,i.jsx)("div",{className:ge().instructions,children:(0,i.jsxs)("div",{className:ge().wrapper,children:[(0,i.jsx)("h2",{children:"Place the cards on the timeline in the correct order."}),(0,i.jsx)("div",{className:ge().highscoreWrapper,children:(0,i.jsx)(ne,{score:t,title:"Best streak"})}),(0,i.jsx)(ee,{onClick:r,text:"Start game!"}),(0,i.jsxs)("div",{className:ge().about,children:[(0,i.jsxs)("div",{children:["All data sourced from "," ",(0,i.jsx)("a",{href:"https://github.com/ja1984/sogdb",target:"_blank",rel:"noopener noreferrer",children:"SOGDb"}),"."]}),(0,i.jsxs)("div",{children:["Game based on "," ",(0,i.jsx)("a",{href:"https://github.com/tom-james-watson/wikitrivia",target:"_blank",rel:"noopener noreferrer",children:"Wiki History Game"}),"."]}),(0,i.jsx)(be.Z,{href:"https://github.com/chocomega/stadia-games-history","data-size":"large","data-show-count":"false","aria-label":"Star chocomega/stadia-games-history on GitHub",children:"GitHub"})]})]})})}function _e(e,t,r,n,a,i,o){try{var c=e[i](o),l=c.value}catch(s){return void r(s)}c.done?t(l):Promise.resolve(l).then(n,a)}function xe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){_e(i,n,a,o,c,"next",e)}function c(e){_e(i,n,a,o,c,"throw",e)}o(void 0)}))}}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function we(){var e=(0,o.useState)(null),t=e[0],r=e[1],n=(0,o.useState)(!1),c=n[0],s=n[1],d=(0,o.useState)(!1),u=d[0],f=d[1],p=(0,o.useState)(null),m=p[0],h=p[1];o.useEffect((function(){xe(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("https://raw.githubusercontent.com/ja1984/sogdb/master/data/games.json");case 2:t=e.sent,r=t.data.games.map((function(e){return{date_prop_id:"P577",description:e.description,id:e.store_link,image:e.image_slug,instance_of:["video game"],label:e.name,occupations:null,page_views:0,wikipedia_title:e.store_link,year:Math.floor(new Date(e.released).getTime()/1e3)}})),h(r);case 5:case"end":return e.stop()}}),e)})))()}),[]),o.useEffect((function(){xe(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===m){e.next=7;break}return e.t0=r,e.next=4,g(m);case 4:e.t1=e.sent,(0,e.t0)(e.t1),s(!0);case 7:case"end":return e.stop()}}),e)})))()}),[m]);var b,y=o.useCallback((function(){xe(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===m){e.next=6;break}return e.t0=r,e.next=4,g(m);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))()}),[m]),v=je(o.useState(Number(null!==(b=localStorage.getItem("highscore"))&&void 0!==b?b:"0")),2),_=v[0],x=v[1],j=o.useCallback((function(e){localStorage.setItem("highscore",String(e)),x(e)}),[]);return c&&null!==t?u?(0,i.jsx)(ue,{highscore:_,state:t,setState:r,resetGame:y,updateHighscore:j}):(0,i.jsx)(ve,{highscore:_,start:function(){return f(!0)}}):(0,i.jsx)(he,{})}},7052:function(e){e.exports={wrapper:"board_wrapper__2Jo3Y",top:"board_top__3ygTE",bottom:"board_bottom__Vh-0o"}},4362:function(e){e.exports={button:"button_button__23c-B"}},6814:function(e){e.exports={gameOver:"game-over_gameOver__2FDNi",scoresWrapper:"game-over_scoresWrapper__ZNu3p",score:"game-over_score__X9g9h"}},2251:function(e){e.exports={hearts:"hearts_hearts__ioqM2",heart:"hearts_heart__2ggQi"}},9674:function(e){e.exports={instructions:"instructions_instructions__1cu4s",wrapper:"instructions_wrapper__qX4iF",highscoreWrapper:"instructions_highscoreWrapper__2Sz8E",about:"instructions_about__2GUZQ"}},337:function(e){e.exports={itemCard:"item-card_itemCard__dCw1A",front:"item-card_front__3I6YL",back:"item-card_back__1bHjt",dragging:"item-card_dragging__4gAkD",played:"item-card_played__1jF6P",flipped:"item-card_flipped__1-pwX",top:"item-card_top__YRpb-",image:"item-card_image__2cewM",bottom:"item-card_bottom__1Oqh8",correct:"item-card_correct__1BYpN",incorrect:"item-card_incorrect__15ahj",description:"item-card_description__2r48O",wikipedia:"item-card_wikipedia__3oiL7",date:"item-card_date__2JtyT",label:"item-card_label__vSjQH"}},3025:function(e){e.exports={loading:"loading_loading__2VABq"}},549:function(e){e.exports={container:"next-item-list_container__dFdwf",wrapper:"next-item-list_wrapper__aJdKp",list:"next-item-list_list__3cYbs"}},6495:function(e){e.exports={wrapper:"played-item-list_wrapper__2b-Jl",listContainer:"played-item-list_listContainer__1r0oU",timelineContainer:"played-item-list_timelineContainer__2_IUJ",timeline:"played-item-list_timeline__2ocbn",list:"played-item-list_list__2c1MJ",items:"played-item-list_items__3g9j6"}},8586:function(e){e.exports={score:"score_score__2wIec",title:"score_title__oZDna",value:"score_value__31kKg"}}}]);